!function(){"use strict";class e{constructor(e,t,n){let{name:r,link:o}=e;this._handleImageClick=n,this._name=r,this._link=o,this._cardSelector=t}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})})),this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__image").setAttribute("src",this._link),this._cardElement.querySelector(".card__image").setAttribute("alt",this._name),this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formElement=t,this._errorClass=e.errorClass,this._inputErrorClass=e.inputErrorClass,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEl=[...this._formElement.querySelectorAll(this._inputSelector)]}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_showInputError(e,t){const n=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_hasInvalidInput(){return this._inputEl.some((e=>!e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEl.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()}))}enableValidation(){this._setEventListeners(),this._toggleButtonState()}}const n=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-modal"),o=r.querySelector("#modal-close-button"),i=document.querySelector(".profile__title"),s=document.querySelector("#profile__description"),a=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-description-input"),c=document.querySelector(".profile__add-button"),u=r.querySelector(".modal__form"),d=(r.querySelector("#edit-save-button"),document.querySelector(".cards__list")),m=(document.querySelector("#card-template").content.firstElementChild,document.querySelector("#profile__add-form")),_=document.querySelector("#add__card-form"),h=document.querySelector("#addCard-title-input"),p=document.querySelector("#addCard-description-input"),S=document.querySelector("#profile__close-modal"),E=document.querySelector("#card__image_modal"),y=document.querySelector("#modal__image-close-button"),v=document.querySelector("#modal__image"),f=document.querySelector("#modal__image_description"),b=(document.querySelector(".modal"),document.querySelectorAll(".modal")),q=(document.querySelector(".modal__container"),document.querySelector("#profile-edit-modal"),document.querySelector("#profile-edit-button"),{formSelector:".modal__form",errorClass:"modal__error",inputErrorClass:"modal__input_type_error",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled"});function k(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",L)}function g(e){e.classList.add("modal_opened"),document.addEventListener("keydown",L)}function L(e){"Escape"===e.key&&k(document.querySelector(".modal_opened"))}function C(e){v.setAttribute("src",e.link),v.setAttribute("alt",e.name),f.textContent=e.name,g(E)}function w(t){const n=function(t,n,r){return new e(t,"#card-template",r).getView()}(t,0,C);d.prepend(n)}new t(q,u).enableValidation(),new t(q,_).enableValidation(),b.forEach((e=>{e.addEventListener("click",(t=>{t.target.classList.contains("modal")&&k(e)}))})),[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}].forEach((e=>{w(e)})),n.addEventListener("click",(()=>{a.value=i.textContent.trim(),l.value=s.textContent.trim(),g(r)})),o.addEventListener("click",(()=>{k(r)})),u.addEventListener("submit",(e=>{e.preventDefault(),i.textContent=a.value,s.textContent=l.value,k(r)})),y.addEventListener("click",(()=>{k(E)})),c.addEventListener("click",(()=>{g(m)})),_.addEventListener("submit",(function(e){e.preventDefault(),w({name:h.value,link:p.value}),_.reset(),k(m)})),S.addEventListener("click",(()=>{k(m)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEIsRUFBV0MsRUFDYixHQUNBLElBaklpQixDQUNuQixDQUNFcEYsS0FBTSxrQkFDTkMsS0FBTSxzR0FFUixDQUNFRCxLQUFNLGNBQ05DLEtBQU0seUdBRVIsQ0FDRUQsS0FBTSxpQkFDTkMsS0FBTSw0R0FFUixDQUNFRCxLQUFNLFVBQ05DLEtBQU0scUdBRVIsQ0FDRUQsS0FBTSx3QkFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLG9HQTZHR3VELFNBQVNrQyxJQUNwQkMsRUFBV0QsRUFBUyxJQUd0QjlCLEVBQWtCbEQsaUJBQWlCLFNBQVMsS0FDMUN1RCxFQUFrQm1DLE1BQVFyQyxFQUFhMUMsWUFBWWdGLE9BQ25EbkMsRUFBd0JrQyxNQUFRcEMsRUFBbUIzQyxZQUFZZ0YsT0FDL0RkLEVBQVUxQixFQUFpQixJQUc3QkMsRUFBbUJwRCxpQkFBaUIsU0FBUyxLQUMzQ3lFLEVBQVd0QixFQUFpQixJQUc5Qk8sRUFBZ0IxRCxpQkFBaUIsVUFBVytDLElBQzFDQSxFQUFFQyxpQkFDRkssRUFBYTFDLFlBQWM0QyxFQUFrQm1DLE1BQzdDcEMsRUFBbUIzQyxZQUFjNkMsRUFBd0JrQyxNQUN6RGpCLEVBQVd0QixFQUFpQixJQUc5QmdCLEVBQXNCbkUsaUJBQWlCLFNBQVMsS0FDOUN5RSxFQUFXUCxFQUFlLElBRzVCVCxFQUFpQnpELGlCQUFpQixTQUFTLEtBQ3pDNkUsRUFBVWpCLEVBQVMsSUFHckJFLEVBQVE5RCxpQkFBaUIsVUF6RHpCLFNBQTZCK0MsR0FDM0JBLEVBQUVDLGlCQUdGaUMsRUFBVyxDQUFFM0YsS0FGQXlFLEVBQVcyQixNQUVMbkcsS0FETnlFLEVBQWMwQixRQUUzQjVCLEVBQVE4QixRQUNSbkIsRUFBV2IsRUFDYixJQW9EQUssRUFBaUJqRSxpQkFBaUIsU0FBUyxLQUN6Q3lFLEVBQVdiLEVBQVMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgLy8gSW5pdGlhbGl6YXRpb25cbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICAvLyBFdmVudCBMaXN0ZW5lcnNcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xuICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgICAgbGluazogdGhpcy5fbGluayxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBDYXJkIEFjdGlvbnNcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICAvLyBDYXJkIFJlbmRlcmluZ1xuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLl9saW5rKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWwpIHtcbiAgICAvLyBJbml0aWFsaXphdGlvblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuXG4gICAgLy8gRE9NIEVsZW1lbnRzXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEVsID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICB9XG5cbiAgLy8gSW5wdXQgVmFsaWRhdGlvblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICAvLyBFcnJvciBIYW5kbGluZ1xuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIG1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vIEJ1dHRvbiBTdGF0ZVxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsLnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gRXZlbnQgTGlzdGVuZXJzXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFB1YmxpYyBNZXRob2RzXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW1wb3J0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuaW1wb3J0IEZvcm1WYWxpZGF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBpbml0aWFsIGNhcmRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyBcIixcbiAgfSxcbl07XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGVsZW1lbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtY2xvc2UtYnV0dG9uXCJcbik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRTdWJtaXQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1zYXZlLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5jb25zdCBhZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fYWRkLWZvcm1cIik7XG5jb25zdCBhZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRfX2NhcmQtZm9ybVwiKTtcbmNvbnN0IHBsYWNlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZENhcmQtdGl0bGUtaW5wdXRcIik7XG5jb25zdCBwbGFjZUlucHV0VXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRDYXJkLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xuY29uc3QgY2xvc2VCdXR0b25QbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fY2xvc2UtbW9kYWxcIik7XG5jb25zdCBjYXJkSW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9faW1hZ2VfbW9kYWxcIik7XG5jb25zdCBtb2RhbEltYWdlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNtb2RhbF9faW1hZ2UtY2xvc2UtYnV0dG9uXCJcbik7XG5jb25zdCBtb2RhbEltYWdlU3JjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9faW1hZ2VcIik7XG5jb25zdCBtb2RhbEltYWdlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNtb2RhbF9faW1hZ2VfZGVzY3JpcHRpb25cIlxuKTtcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5jb25zdCBtb2RhbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbnRhaW5lclwiKTtcbmNvbnN0IGVkaXRNb2RhbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuY29uc3QgYWRkTW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5cbmNvbnN0IGZvcm1TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxufTtcblxuY29uc3QgZm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRpb24oZm9ybVNldHRpbmdzLCBwcm9maWxlRWRpdEZvcm0pO1xuZm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0aW9uKGZvcm1TZXR0aW5ncywgYWRkRm9ybSk7XG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZnVuY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmZ1bmN0aW9uIGNsb3NlUG9wdXAobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEJ5RXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxCeUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWxCeUVzY2FwZShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuICAgIGNsb3NlUG9wdXAob3BlbmVkTW9kYWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcbiAgbW9kYWxJbWFnZVNyYy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgY2FyZERhdGEubGluayk7XG4gIG1vZGFsSW1hZ2VTcmMuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGNhcmREYXRhLm5hbWUpO1xuICBtb2RhbEltYWdlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuICBvcGVuUG9wdXAoY2FyZEltYWdlTW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBuYW1lID0gcGxhY2VJbnB1dC52YWx1ZTtcbiAgY29uc3QgbGluayA9IHBsYWNlSW5wdXRVcmwudmFsdWU7XG4gIGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rIH0pO1xuICBhZGRGb3JtLnJlc2V0KCk7XG4gIGNsb3NlUG9wdXAoYWRkTW9kYWwpO1xufVxuXG5mdW5jdGlvbiBnZXRDYXJkKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICBjYXJkTGlzdEVsLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBldmVudCBsaXN0ZW5lciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xubW9kYWxzLmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XG4gICAgICBjbG9zZVBvcHVwKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xuICBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbn0pO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudC50cmltKCk7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50LnRyaW0oKTtcbiAgb3BlblBvcHVwKHByb2ZpbGVFZGl0TW9kYWwpO1xufSk7XG5cbnByb2ZpbGVDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZVBvcHVwKHByb2ZpbGVFZGl0TW9kYWwpO1xufSk7XG5cbnByb2ZpbGVFZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gcHJvZmlsZVRpdGxlSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZVBvcHVwKHByb2ZpbGVFZGl0TW9kYWwpO1xufSk7XG5cbm1vZGFsSW1hZ2VDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZVBvcHVwKGNhcmRJbWFnZU1vZGFsKTtcbn0pO1xuXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Qb3B1cChhZGRNb2RhbCk7XG59KTtcblxuYWRkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG5jbG9zZUJ1dHRvblBsYWNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlUG9wdXAoYWRkTW9kYWwpO1xufSk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0aW9uIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfZm9ybUVsZW1lbnQiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfc3VibWl0QnV0dG9uIiwiX2lucHV0RWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwibWVzc2FnZSIsImFkZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJzb21lIiwiZGlzYWJsZWQiLCJmb3JFYWNoIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVDbG9zZUJ1dHRvbiIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlQWRkQnV0dG9uIiwicHJvZmlsZUVkaXRGb3JtIiwiY2FyZExpc3RFbCIsImFkZE1vZGFsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhZGRGb3JtIiwicGxhY2VJbnB1dCIsInBsYWNlSW5wdXRVcmwiLCJjbG9zZUJ1dHRvblBsYWNlIiwiY2FyZEltYWdlTW9kYWwiLCJtb2RhbEltYWdlQ2xvc2VCdXR0b24iLCJtb2RhbEltYWdlU3JjIiwibW9kYWxJbWFnZURlc2NyaXB0aW9uIiwibW9kYWxzIiwiZm9ybVNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiY2xvc2VQb3B1cCIsIm1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlTW9kYWxCeUVzY2FwZSIsIm9wZW5Qb3B1cCIsImV2dCIsImtleSIsImNhcmREYXRhIiwiY3JlYXRlQ2FyZCIsImNhcmRFbGVtZW50IiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJnZXRDYXJkIiwicHJlcGVuZCIsImV2ZW50IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ2YWx1ZSIsInRyaW0iLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=